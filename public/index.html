<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>ASCII Art</title>

        <link rel="stylesheet" href="styles.css" />
        <meta
            name="description"
            content="WebAssembly: Real-time image processing"
        />
    </head>
    <body>
        <!-- FPS Counter -->
        <div id="fps-counter">FPS: --</div>
        
        <!-- Controls Panel -->
        <aside class="sidebar" role="complementary" aria-label="Image processing controls">
            <!-- Theme & Mode Controls -->
            <section class="control-group">
                <button class="theme-toggle toggle" type="button">Switch to Light Theme</button>
                <button class="ascii-toggle toggle" type="button">Switch to Canvas</button>
            </section>

            <!-- ASCII Configuration -->
            <section class="ascii-config control-group">
                <h3 class="section-title">ASCII Settings</h3>
                
                <div class="control-item">
                    <label for="resolution-slider">Resolution:</label>
                    <input
                        type="range"
                        id="resolution-slider"
                        class="slider"
                        min="100"
                        max="600"
                        step="5"
                        value="100"
                        aria-describedby="resolution-help"
                    />
                    <small id="resolution-help" class="help-text">Adjust character density</small>
                </div>

                <div class="control-item">
                    <label class="checkbox-label">
                        <input type="checkbox" id="invert" />
                        <span>Inverted colors</span>
                    </label>
                </div>

                <div class="info-panel">
                    <div class="info-item">
                        <span class="info-label">Width:</span>
                        <span id="canvas-width" class="info-value">--</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Height:</span>
                        <span id="canvas-height" class="info-value">--</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Font Size:</span>
                        <span id="font-size" class="info-value">--</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Line Height:</span>
                        <span id="line-height" class="info-value">--</span>
                    </div>
                </div>
            </section>

            <!-- Canvas Effects Configuration -->
            <section class="canvas-config control-group d-none">
                <h3 class="section-title">Visual Effects</h3>
                
                <!-- Basic Effects -->
                <fieldset class="effect-group">
                    <legend>Basic Effects</legend>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input class="effect" type="radio" id="original" name="color" checked />
                            <span>Original</span>
                        </label>
                        <label class="radio-label">
                            <input class="effect" type="radio" id="grayscale" name="color" />
                            <span>Grayscale</span>
                        </label>
                        <label class="radio-label">
                            <input class="effect" type="radio" id="monochrome" name="color" />
                            <span>Monochrome</span>
                        </label>
                        <label class="radio-label">
                            <input class="effect" type="radio" id="sepia" name="color" />
                            <span>Sepia</span>
                        </label>
                    </div>
                </fieldset>

                <!-- BATCH 1: VINTAGE & FILM EFFECTS -->
                <fieldset class="effect-group">
                    <legend>Vintage & Film Effects</legend>

                    <!-- Vignette with Controls -->
                    <div class="filter-control-group">
                        <label class="radio-label">
                            <input class="effect" type="radio" id="vignette" name="color" />
                            <span>Vignette</span>
                        </label>
                        <div class="control-item">
                            <label for="vignette-intensity">Intensity:</label>
                            <input
                                type="range"
                                id="vignette-intensity"
                                class="slider"
                                min="0"
                                max="1"
                                step="0.1"
                                value="0.5"
                            />
                            <span class="slider-value">0.5</span>
                        </div>
                    </div>

                    <!-- Film Grain with Controls -->
                    <div class="filter-control-group">
                        <label class="radio-label">
                            <input class="effect" type="radio" id="film-grain" name="color" />
                            <span>Film Grain</span>
                        </label>
                        <div class="control-item">
                            <label for="grain-intensity">Amount:</label>
                            <input
                                type="range"
                                id="grain-intensity"
                                class="slider"
                                min="0"
                                max="50"
                                step="5"
                                value="20"
                            />
                            <span class="slider-value">20</span>
                        </div>
                    </div>

                    <!-- Cross Process (no controls) -->
                    <div class="filter-control-group">
                        <label class="radio-label">
                            <input class="effect" type="radio" id="cross-process" name="color" />
                            <span>Cross Process</span>
                        </label>
                    </div>

                    <!-- Lomography (no controls) -->
                    <div class="filter-control-group">
                        <label class="radio-label">
                            <input class="effect" type="radio" id="lomography" name="color" />
                            <span>Lomography</span>
                        </label>
                    </div>
                </fieldset>

                <!-- BATCH 1: COLOR ADJUSTMENTS -->
                <fieldset class="effect-group">
                    <legend>Color Adjustments</legend>

                    <!-- Brightness/Contrast with Controls -->
                    <div class="filter-control-group">
                        <label class="radio-label">
                            <input class="effect" type="radio" id="brightness-contrast" name="color" />
                            <span>Brightness/Contrast</span>
                        </label>
                        <div class="control-item">
                            <label for="brightness-value">Brightness:</label>
                            <input
                                type="range"
                                id="brightness-value"
                                class="slider"
                                min="-50"
                                max="50"
                                step="5"
                                value="0"
                            />
                            <span class="slider-value">0</span>
                        </div>
                        <div class="control-item">
                            <label for="contrast-value">Contrast:</label>
                            <input
                                type="range"
                                id="contrast-value"
                                class="slider"
                                min="0.5"
                                max="2.0"
                                step="0.1"
                                value="1.0"
                            />
                            <span class="slider-value">1.0</span>
                        </div>
                    </div>

                    <!-- Saturation with Controls -->
                    <div class="filter-control-group">
                        <label class="radio-label">
                            <input class="effect" type="radio" id="saturation-filter" name="color" />
                            <span>Saturation</span>
                        </label>
                        <div class="control-item">
                            <label for="saturation-value">Amount:</label>
                            <input
                                type="range"
                                id="saturation-value"
                                class="slider"
                                min="0"
                                max="2"
                                step="0.1"
                                value="1.0"
                            />
                            <span class="slider-value">1.0</span>
                        </div>
                    </div>

                    <!-- Hue Shift with Controls -->
                    <div class="filter-control-group">
                        <label class="radio-label">
                            <input class="effect" type="radio" id="hue-shift" name="color" />
                            <span>Hue Shift</span>
                        </label>
                        <div class="control-item">
                            <label for="hue-degrees">Degrees:</label>
                            <input
                                type="range"
                                id="hue-degrees"
                                class="slider"
                                min="-180"
                                max="180"
                                step="10"
                                value="0"
                            />
                            <span class="slider-value">0°</span>
                        </div>
                    </div>

                    <!-- Temperature with Controls -->
                    <div class="filter-control-group">
                        <label class="radio-label">
                            <input class="effect" type="radio" id="temperature-filter" name="color" />
                            <span>Temperature</span>
                        </label>
                        <div class="control-item">
                            <label for="temperature-value">Warmth:</label>
                            <input
                                type="range"
                                id="temperature-value"
                                class="slider"
                                min="-1"
                                max="1"
                                step="0.1"
                                value="0"
                            />
                            <span class="slider-value">0</span>
                        </div>
                    </div>
                </fieldset>

                <!-- Advanced Effects (Legacy) -->
                <fieldset class="effect-group">
                    <legend>Legacy Effects</legend>
                    <div class="effect-grid">
                        <label class="radio-label">
                            <input class="effect" type="radio" id="ryo" name="color" />
                            <span>Ryo</span>
                        </label>
                        <label class="radio-label">
                            <input class="effect" type="radio" id="lix" name="color" />
                            <span>Lix</span>
                        </label>
                        <label class="radio-label">
                            <input class="effect" type="radio" id="neue" name="color" />
                            <span>Neue</span>
                        </label>
                        <label class="radio-label">
                            <input class="effect" type="radio" id="solarize" name="color" />
                            <span>Solarize</span>
                        </label>
                    </div>
                </fieldset>

                <!-- Channel Offset -->
                <fieldset class="effect-group">
                    <legend>Channel Offset</legend>
                    <div class="channel-controls">
                        <div class="radio-group horizontal">
                            <label class="radio-label">
                                <input type="radio" id="red" class="channel-index" value="0" name="channel" />
                                <span>Red</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" class="channel-index" id="green" value="1" name="channel" />
                                <span>Green</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" id="blue" class="channel-index" value="2" name="channel" />
                                <span>Blue</span>
                            </label>
                        </div>
                        <div class="control-item">
                            <label for="offset-slider">Offset Amount:</label>
                            <input
                                type="range"
                                id="offset-slider"
                                class="slider"
                                min="0"
                                max="50"
                                step="1"
                                value="25"
                            />
                        </div>
                    </div>
                </fieldset>

                <!-- Additional Effects -->
                <div class="control-item">
                    <label class="checkbox-label">
                        <input class="effect" type="checkbox" id="blur" name="blur" />
                        <span>Blur Effect</span>
                    </label>
                </div>

            </section>

            <!-- Color Picker -->
            <section class="control-group">
                <div class="control-item">
                    <label for="color-picker" class="color-picker-label">Accent Color:</label>
                    <input type="color" id="color-picker" class="color-input" value="#ffffff" />
                </div>
            </section>
        </aside>
        <!-- Main Display Area -->
        <main class="display-area" role="main" aria-label="Image processing output">
            <div class="output-container">
                <canvas class="d-none" id="canvas" width="100" height="40" aria-label="Processed image canvas"></canvas>
                <pre class="ascii" aria-label="ASCII art output"></pre>
            </div>
        </main>

        <script type="module" src="scripts/main.js"></script>
        <script>
            // Update slider value displays in real-time
            document.addEventListener('DOMContentLoaded', function() {
                const sliders = [
                    { slider: 'vignette-intensity', value: '.slider-value', suffix: '' },
                    { slider: 'grain-intensity', value: '.slider-value', suffix: '' },
                    { slider: 'brightness-value', value: '.slider-value', suffix: '' },
                    { slider: 'contrast-value', value: '.slider-value', suffix: '' },
                    { slider: 'saturation-value', value: '.slider-value', suffix: '' },
                    { slider: 'hue-degrees', value: '.slider-value', suffix: '°' },
                    { slider: 'temperature-value', value: '.slider-value', suffix: '' }
                ];

                sliders.forEach(config => {
                    const slider = document.getElementById(config.slider);
                    if (slider) {
                        const valueDisplay = slider.parentNode.querySelector('.slider-value');
                        if (valueDisplay) {
                            slider.addEventListener('input', () => {
                                valueDisplay.textContent = slider.value + config.suffix;
                            });
                        }
                    }
                });
            });
        </script>
    </body>
</html>
